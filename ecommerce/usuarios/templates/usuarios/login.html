{% extends "core/base.html" %}
{% load static %}

{% block title %}Login - Ganyk Store{% endblock %}

{% block content %}
<div class="login-wrapper">
  <div class="login-box">

    <!-- Coluna esquerda (login social) -->
    <div class="login-left">
      <h2 class="login-title">Entrar com rede social</h2>
      <button class="btn-social facebook">
        <img src="{% static 'usuarios/img/icons/facebook.png' %}" alt="facebook">
        Login com Facebook
      </button>
      <button class="btn-social apple">
        <img src="{% static 'usuarios/img/icons/github.png' %}" alt="github">
        Login com GitHub
      </button>
      <button class="btn-social google">
        <img src="{% static 'usuarios/img/icons/google.png' %}" alt="google">
        Login com Google
      </button>
      <p class="login-help">Associe uma conta de cada rede para acessar a Ganyk Store.</p>
    </div>

    <!-- Coluna direita (login tradicional) -->
    <div class="login-right">
      <h2 class="login-title">Entre ou cadastre-se</h2>
      <form method="post" class="login-form">
        {% csrf_token %}
        {% if messages %}
          <div class="login-messages">
            {% for message in messages %}
              <p class="login-message {{ message.tags }}">{{ message }}</p>
            {% endfor %}
          </div>
        {% endif %}
        <div class="form-group">
          {{ form.username }}
        </div>
        <div class="form-group">
          {{ form.password }}
        </div>
        <div class="form-group checkbox">
          <input type="checkbox" name="remember_me" id="id_remember_me" class="form-check-input custom-checkbox" {% if form.remember_me.value %}checked{% endif %}>
          <label for="id_remember_me" class="checkbox-label">Manter-me logado</label>
        </div>
        <button type="submit" class="btn-login">Entrar</button>
      </form>
      <a href="{% url 'cadastro' %}" class="btn-create">Criar conta</a>
      <a href="#" class="forgot" id="open-forgot-modal">Esqueceu seus dados de acesso?</a>
      <div id="forgot-modal" class="modal-fg" style="display:none;">
        <div class="modal-fg-content">
          <button class="modal-fg-close" id="close-forgot-modal" aria-label="Fechar">&times;</button>
          <h2 class="modal-fg-title">Esqueceu seus dados de acesso?</h2>
          <p class="modal-fg-desc">Vamos te ajudar a recuperar sua senha.</p>
          <form method="post" class="modal-fg-form" autocomplete="off" action="{% url 'password_reset' %}">
            {% csrf_token %}
            <input type="email" name="email" class="modal-fg-input" placeholder="E-mail cadastrado" required>
            <button type="submit" class="modal-fg-btn">Redefinir senha</button>
          </form>
        </div>
        <div class="modal-fg-bg"></div>
      </div>
      <script>
        const openModal = document.getElementById('open-forgot-modal');
        const closeModal = document.getElementById('close-forgot-modal');
        const modal = document.getElementById('forgot-modal');
        openModal.addEventListener('click', function(e) {
          e.preventDefault();
          modal.style.display = 'flex';
          document.body.style.overflow = 'hidden';
        });
        closeModal.addEventListener('click', function() {
          modal.style.display = 'none';
          document.body.style.overflow = '';
        });
        modal.querySelector('.modal-fg-bg').addEventListener('click', function() {
          modal.style.display = 'none';
          document.body.style.overflow = '';
        });
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape') {
            modal.style.display = 'none';
            document.body.style.overflow = '';
          }
        });
      </script>
    </div>

  </div>
</div>
{% endblock %}
